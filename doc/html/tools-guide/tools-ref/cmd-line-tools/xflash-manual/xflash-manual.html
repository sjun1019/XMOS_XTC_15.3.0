<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="XBURN" href="../xburn-manual/xburn-manual.html" /><link rel="prev" title="XGDBSERVER" href="../xgdbserver-manual/xgdbserver-manual.html" />

    <link rel="shortcut icon" href="../../../../_static/x-favicon.png"/><!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>XFLASH - XMOS XTC Tools v15.3</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #1399DB;
  --color-brand-content: #1399DB;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #1399DB;
  --color-brand-content: #1399DB;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #1399DB;
  --color-brand-content: #1399DB;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">XMOS XTC Tools v15.3</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../../_static/x-logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">XMOS XTC Tools v15.3</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><!-- This html element presents a list of pdfs that can be generated -->
<!-- We expect pdfs to be in a folder called pdf alongside the folder called html -->

<!-- TODO: generate this list using JS only for real pdfs that exist -->

<!-- pathto(root_doc) set by sphinx for each page, but root doc has # -->

<div id="pdf_linker">
    <script>
        function openPDF(url) {
            if (url=="--select--") {
                return;
            }
            window.location.href = url;
        }
    </script>
    PDFs:
    <select title="Link to generated pdfs" onchange="openPDF(value);">
        <option>--select--</option>
        
        <option
            title="xtc_tools_introduction_v15.3.pdf"
            value="../../../../index.html/../../pdf/xtc_tools_introduction_v15.3.pdf"
        >
            XMOS XTC Tools - Introduction
        </option> 
        
        <option
            title="xtc_tools_installation_v15.3.pdf"
            value="../../../../index.html/../../pdf/xtc_tools_installation_v15.3.pdf"
        >
            XMOS XTC Tools - Installation
        </option> 
        
        <option
            title="xtc_tools_guide_v15.3.pdf"
            value="../../../../index.html/../../pdf/xtc_tools_guide_v15.3.pdf"
        >
            XMOS XTC Tools - Tools Guide
        </option> 
        
        <option
            title="xtc_prog_guide_v15.3.pdf"
            value="../../../../index.html/../../pdf/xtc_prog_guide_v15.3.pdf"
        >
            XMOS XTC Tools - Programming Guide
        </option> 
        
    </select>
</div>
<div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/index.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../installation/index.html">Installation guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/install-configure/system-requirements/requirements.html">System requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/install-configure/install-tools/install.html">Installation instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/install-configure/install-tools/install_prerequisites.html">Installation of required third-party tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation/install-configure/getting-started.html">Configuring the command-line environment</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../index.html">Tools guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../quick-start/index.html">Quick start</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/single-tile.html">A single-tile program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/multi-tile.html">Targeting multiple tiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/switch-setup.html">Communicating between tiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/fast-printf.html">Using xSCOPE for fast “printf debugging”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/debug.html">Debugging with XGDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quick-start/build-system.html">Build system</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../vscode-guide/index.html">Using VS Code</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vscode-guide/example/index.html">Building an example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vscode-guide/next-steps/index.html">Using VS Code with a real project</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../tutorials/index.html">Tools and target features</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/describe-a-target-platform/platform.html">Describe a target platform</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../tutorials/working-with-targets/index.html">Working with targets</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#key-target-based-features">Key target-based features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#xtag">xTAG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#host-tools">Host tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#target-interaction">Target interaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#host-io">Host-IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#xscope-apis">xSCOPE APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#user-supplied-host-program">User-supplied host program</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#sample-based-profiling-of-the-target-program">Sample-based profiling of the target program</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#target-errors-and-warnings">Target errors and warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tutorials/working-with-targets/intro.html#command-examples">Command examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/design-with-flash/flash.html">Design and manufacture systems with flash memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/safeguard-ip/safeguard.html">Safeguard IP and device authenticity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/add-flash-support/flash.html">Add support for a new flash device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/lpddr.html">Using LPDDR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/swmem.html">Using software-defined memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/args-and-ret-codes.html">How to use arguments and return codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/using-xsim.html">Using XSIM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tutorials/understanding-xe-structure.html">Understanding XE files and how they are loaded</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="../index.html">Command line tools</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../xrun-manual/xrun-manual.html">XRUN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xsim-manual/xsim-manual.html">XSIM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xcc-manual/xcc-manual.html">XCC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xobjdump-manual/xobjdump-manual.html">XOBJDUMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xgdb-manual/xgdb-manual.html">XGDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xgdbserver-manual/xgdbserver-manual.html">XGDBSERVER</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">XFLASH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xburn-manual/xburn-manual.html">XBURN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../xmake-manual/xmake-manual.html">XMAKE</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../formats/index.html">File formats and data descriptions</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../formats/xe.html">XMOS executable (XE) file format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../formats/xn-spec/xn-spec.html">XN specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../formats/xsim-trace.html">XSIM trace output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../formats/config-xscope.html">xSCOPE config file</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../xscope/index.html">xSCOPE</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../xscope/xscope-command-line-options.html">xSCOPE command line options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../xscope/xscope-performance.html">xSCOPE performance figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../xscope/xscope-target-library.html">xSCOPE target library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../xscope/xscope-host-library.html">xSCOPE host library</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../libraries/index.html">Libraries</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/lib-xcore-api/lib-xcore-api.html">lib_xcore</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../libraries/libxs1/lib-xs1-api.html">lib_xs1</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../libraries/libxs1/lib-xs1-defines-xs3a.html">XS3 definitions</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../libraries/libxs1/lib-xs1-defines-xs2a.html">XS2 definitions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/libflash-api/libflash-api.html">libflash API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/libquadflash-api/libquadflash-api.html">libquadflash API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/libflash-included-devices/libflash-devices.html">List of devices natively supported by libflash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/libquadflash-included-devices/libquadflash-devices.html">List of devices natively supported by libquadflash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../libraries/lib-otp-api/lib-otp-api.html">lib_otp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../xcommon_cmake.html">XCommon CMake build system</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../xcommon/index.html">XCOMMON build system</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../xcommon/using-makefiles.html">Using the XCOMMON build system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../xcommon/makefile-libraries.html">Using XMOS Makefiles to create binary libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../transitioning/index.html">Transitioning from older tools releases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../prog-guide/index.html">Programming guide</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../prog-guide/arch-hw-guide/index.html">Architecture &amp; hardware guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../prog-guide/quick-start/index.html">Quick start</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../prog-guide/quick-start/prog-model.html">The multicore programming model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../prog-guide/quick-start/c-programming-guide/index.html">Programming an XCORE tile with C and lib_xcore</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../prog-guide/prog-ref/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../prog-guide/prog-ref/programming-in-c-xc.html">Programming in C/XC</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/calling-between-c-xc/calling.html">Calling between C/C++ and XC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/xc-imp-defined-behavior/xc-imp.html">XC implementation-defined behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/c-imp-defined-behavior/c-imp.html">C implementation-defined behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/c-lang-ref/clangref.html">C and C++ language reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/xcc-pragma-directives/pragmas.html">XCC pragma directives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/cheat.html">XC to C cheat sheet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/memory-models.html">Memory models</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../prog-guide/prog-ref/programming-in-asm.html">Programming in assembly</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/inline-assembly/inline-assembly.html">Inline assembly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/assembly-for-xmos-xs1-abi/assembly-for-abi.html">Make assembly programs compatible with the XMOS XS1 ABI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/assembly-manual/assembly.html">Assembly programming manual</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../prog-guide/prog-ref/programming-xs1-devices.html">Programming for XCORE Devices</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/xs1-data-types/datatypes.html">xcore data types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/xs1-port-to-pin-map/portmap.html">xcore port-to-pin mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../prog-guide/prog-ref/xs1-abi/abi.html">XCORE 32-bit application binary interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="xflash">
<span id="xflash-manual"></span><h1>XFLASH<a class="headerlink" href="#xflash" title="Permalink to this heading">#</a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xflash</span> <span class="n">xe</span><span class="o">-</span><span class="n">file</span>
<span class="n">xflash</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">#</a></h2>
<p>XFLASH creates binary files in the XTC flash format, as illustrated in
the diagram below. It can also program these files onto flash devices
used to boot XMOS systems.</p>
<figure class="align-default" id="id1">
<span id="xflash-manual-flash-format-diagram"></span><img alt="../../../../_images/flash-format.png" src="../../../../_images/flash-format.png" />
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text">Flash format diagram</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Basic usage in the form <strong class="command">xflash a.xe</strong> causes XFLASH to convert
the application in <code class="docutils literal notranslate"><span class="pre">a.xe</span></code> to the XTC flash image format. This image
format is loaded into memory by the XTC flash loader, which XFLASH also
generates and customises for the target configuration.</p>
<p>The combined file with loader and image is transferred to the target
using XGDB. This includes a small program loaded directly into RAM
that runs on the target to perform the interaction with the flash
device.</p>
<p>Once flash programming is complete, the system is reset and boots
according to the boot source pins. If configured correctly the ROM
will chain-load the XTC flash loader, which chain-loads the application.</p>
<p>XFLASH can also be used in conjunction with XBURN to secure the target
system, providing a root of trust using OTP memory. Under this scheme,
the device is permanently configured to boot an executable that resides
in OTP, which verifies the signature of the flash loader. The flash
loader also enforces similar signature verification of candidate
application images.</p>
<p>The process of generating the overall flash image requires XFLASH to
know certain properties of the flash device, such as number of pages.
This information can be specified in the <a class="reference internal" href="../../formats/xn-spec/xn-spec.html#xn-spec-device"><span class="std std-ref">XN file</span></a>
as attributes of the flash device, but if unspecified, XFLASH will try
to determine these automatically by running an additional program on
the target called the ‘device inquirer’. The inquirer connects to the
flash device and will make use of SFDP to discover the necessary
information.</p>
<p>XFLASH also exposes generic flash read, write and erase facilities that
do not invoke the image generation component. These can be used for
backing up the contents of the flash or programming an externally or
separately generated image file. The flash writer additionally includes
a feature to compress ‘sparse’ images in order to more quickly transmit
the data from the host to the target - see the <a class="reference internal" href="#cmdoption-xflash-load-format"><code class="xref std std-option docutils literal notranslate"><span class="pre">--load-format</span></code></a>
option for details.</p>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading">#</a></h2>
<section id="overall-options">
<h3>Overall Options<a class="headerlink" href="#overall-options" title="Permalink to this heading">#</a></h3>
<p>The following options are used to specify the program images and data
that makes up the binary and its layout. Padding is inserted when
required to ensure that images are aligned on sector boundaries.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-factory">
<span class="sig-name descname"><span class="pre">--factory</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;xe-file&gt;</span> <span class="pre">[size]</span></span><a class="headerlink" href="#cmdoption-xflash-factory" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies &lt;xe-file&gt; as the factory image. If size is specified,
padding is inserted to make the space between the start of this image
and the next image at least the specified size. The default unit of
size is “bytes;” the size can be postfixed with <code class="docutils literal notranslate"><span class="pre">k</span></code> to specify a
unit of kilobytes.</p>
<p>At most one factory image may be specified.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-upgrade">
<span class="sig-name descname"><span class="pre">--upgrade</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;id&gt;</span> <span class="pre">&lt;xe-file&gt;</span> <span class="pre">[size]</span></span><a class="headerlink" href="#cmdoption-xflash-upgrade" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies &lt;xe-file&gt; as an upgrade image with version <code class="docutils literal notranslate"><span class="pre">id</span></code>. Each
version number must be a unique number greater than 0. If <code class="docutils literal notranslate"><span class="pre">size</span></code> is
specified, padding is inserted to make the space between the start of
this image and the next image at least the specified size. The
default unit of size is “bytes;” the size can be postfixed with <code class="docutils literal notranslate"><span class="pre">k</span></code>
to specify a unit of kilobytes.</p>
<p>Multiple upgrade images are inserted into the boot partition in the
order specified on the command line.</p>
<p>If no factory image is specified, a single upgrade image may be
specified and written to a file with the option <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-factory-version">
<span class="sig-name descname"><span class="pre">--factory-version</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;version&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-factory-version" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies version as the tools release master version that was used to
create the factory image. Accepted values are: 10, 11, 12, 13.0, 13.1,
13.2, 14.0, 14.1, 14.2, 14.3, 14.4, 15.0, 15.1, 15.2 and 15.3. This option
need only be specified when <a class="reference internal" href="#cmdoption-xflash-upgrade"><code class="xref std std-option docutils literal notranslate"><span class="pre">--upgrade</span></code></a> is provided but
<a class="reference internal" href="#cmdoption-xflash-factory"><code class="xref std std-option docutils literal notranslate"><span class="pre">--factory</span></code></a> is not.  This option will ensure that the produced
flash upgrade image is of the correct format for the installed factory
image.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-boot-partition-size">
<span class="sig-name descname"><span class="pre">--boot-partition-size</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;n&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-boot-partition-size" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies the size of the boot partition to be <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes. If left
unspecified, the default size used is the total size of the flash
device. <code class="docutils literal notranslate"><span class="pre">n</span></code> must be greater than or equal to the minimum size
required to store the boot loader, factory image and any upgrade
images.  XFLASH will round up the actual boot partition size to the
next sector boundary in flash memory.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-data">
<span class="sig-name descname"><span class="pre">--data</span></span><span class="sig-prename descclassname"> <span class="pre">[flash-name]</span> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-data" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies the contents of <code class="docutils literal notranslate"><span class="pre">file</span></code> to be written to the data partition.</p>
<p>For a system with multiple flash devices, the data partition of each
device can be specified separately by repeatedly providing this option
with <code class="docutils literal notranslate"><span class="pre">flash-name</span></code> set to the <a class="reference internal" href="../../formats/xn-spec/xn-spec.html#xn-spec-device"><span class="std std-ref">Name attribute</span></a>
of the flash device as defined in the XN file.</p>
<p>If no factory image is specified (meaning the flash is not used for
booting), this option acts as an alias for <a class="reference internal" href="#cmdoption-xflash-write-all"><code class="xref std std-option docutils literal notranslate"><span class="pre">--write-all</span></code></a> for
the target flash device, treating the entire flash array as raw storage
for arbitrary data with no partitioning. If a factory image is specified,
this option will use the data within the specified file to form the data
partition.</p>
<p>This option can target multiple flash devices connected to the same
tile if described as such in the XN file. This requires at least
independent chip select (<code class="docutils literal notranslate"><span class="pre">SS</span></code> or <code class="docutils literal notranslate"><span class="pre">CS</span></code>) ports for each flash device,
but the other ports may be multiplexed. Multiple flash devices can also
be connected to different tiles or nodes but this requires more ports
allocated to flash.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-loader">
<span class="sig-name descname"><span class="pre">--loader</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-loader" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies custom flash loader functions in <code class="docutils literal notranslate"><span class="pre">file</span></code>, where <code class="docutils literal notranslate"><span class="pre">file</span></code> may
be either an object (.o) or archive (.a).</p>
<p>By default, the XTC flash loader selects the image with the highest
version number. A custom loader may choose to override the selected image.
Only valid images passing CRC checks - and additional signature checks,
under secure boot - are considered for selection. The custom loader is not
expected to perform this validation and only informs the XTC flash loader
which of the available valid images is preferred.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-idnum">
<span class="sig-name descname"><span class="pre">--idnum</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;32-bit-integer&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-idnum" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies a numerical identifier which will be stored in the flash.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-idstr">
<span class="sig-name descname"><span class="pre">--idstr</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;a-string&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-idstr" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies a string identifier which will be stored in the flash.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-analyze">
<span class="sig-name descname"><span class="pre">--analyze</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-analyze" title="Permalink to this definition">#</a></dt>
<dd><p>Prints the data structures and extracts the individual sections of the
xCORE flash binary or flash dump in <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
<p>If the factory image was built using an older tools release, the option
<a class="reference internal" href="#cmdoption-xflash-factory-version"><code class="xref std std-option docutils literal notranslate"><span class="pre">--factory-version</span></code></a> must be set accordingly.
If the flash binary is encrypted, <a class="reference internal" href="#cmdoption-xflash-key"><code class="xref std std-option docutils literal notranslate"><span class="pre">--key</span></code></a> can be specified to
enable decryption and signature verification of the sections.</p>
<p>The output code sections can be individually disassembled to aid debugging.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-force">
<span id="cmdoption-xflash-f"></span><span class="sig-name descname"><span class="pre">--force</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-force" title="Permalink to this definition">#</a></dt>
<dd><p>Disables interactive prompts for user confirmation of any action.
This can be used to bypass target warnings without user interaction.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-verbose">
<span id="cmdoption-xflash-v"></span><span class="sig-name descname"><span class="pre">--verbose</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-v</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-verbose" title="Permalink to this definition">#</a></dt>
<dd><p>Prints additional information about the program when loaded onto the
target system.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-help">
<span id="cmdoption-xflash-h"></span><span class="sig-name descname"><span class="pre">--help</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-h</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-help" title="Permalink to this definition">#</a></dt>
<dd><p>Prints a description of the supported command line options.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-version">
<span class="sig-name descname"><span class="pre">--version</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-version" title="Permalink to this definition">#</a></dt>
<dd><p>Displays the version number and copyrights.</p>
</dd></dl>

</section>
<section id="target-options">
<span id="xflash-manual-target-options"></span><h3>Target Options<a class="headerlink" href="#target-options" title="Permalink to this heading">#</a></h3>
<p>The following options are used to specify which flash device the binary
is to be programmed on. The type of flash device used determines the
values for the SPI divider, sector size and memory capacity.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-list-devices">
<span id="cmdoption-xflash-l"></span><span class="sig-name descname"><span class="pre">--list-devices</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-l</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-list-devices" title="Permalink to this definition">#</a></dt>
<dd><p>Prints an enumerated list of all JTAG adapters connected to the
host and the devices on each JTAG chain, in the form:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ID</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Name</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Adapter</span> <span class="pre">ID</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Devices</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">--</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">----</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">----------</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-------</span></code></div>
</div>
<p>The adapters are ordered by their serial numbers.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-id">
<span class="sig-name descname"><span class="pre">--id</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;id&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-id" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies the adapter connected to the target hardware.</p>
<p>XFLASH connects to the target platform and determines the type of
flash device connected to it.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-adapter-id">
<span class="sig-name descname"><span class="pre">--adapter-id</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;serial-number&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-adapter-id" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies the serial number of the adapter connected to the target
hardware. XFLASH connects to the target hardware and determines the
type of flash device connected to it.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-target-file">
<span class="sig-name descname"><span class="pre">--target-file</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;xn-file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-target-file" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies <code class="docutils literal notranslate"><span class="pre">xn-file</span></code> as the target platform.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-target">
<span class="sig-name descname"><span class="pre">--target</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;platform&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-target" title="Permalink to this definition">#</a></dt>
<dd><p>Specifies a target platform. The platform configuration must be
specified in the file <code class="docutils literal notranslate"><span class="pre">platform.xn</span></code>, which is searched for in the paths
specified by the <span class="target" id="index-0"></span><a class="reference internal" href="../xcc-manual/xcc-manual.html#envvar-XCC_DEVICE_PATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">XCC_DEVICE_PATH</span></code></a> environment variable.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-noinq">
<span class="sig-name descname"><span class="pre">--noinq</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-noinq" title="Permalink to this definition">#</a></dt>
<dd><p>Does not run the device inquirer program. The inquirer queries the device
for flash memory density and sector size information. By default the inquirer
runs when the user has not supplied the memory density in the XN file.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">--noinq</span></code> is omitted XFLASH expects to be able to connect to the xCORE
target via JTAG, in order to query the flash device.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-force-jtag">
<span class="sig-name descname"><span class="pre">--force-jtag</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-force-jtag" title="Permalink to this definition">#</a></dt>
<dd><p>Will instruct the program to only communicate over JTAG, and not use the
faster xSCOPE link.  This is the default behaviour.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-force-xscope">
<span class="sig-name descname"><span class="pre">--force-xscope</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-force-xscope" title="Permalink to this definition">#</a></dt>
<dd><p>Will instruct the program to communicate over xSCOPE. This results in much
faster flash programming but is more likely to experience signal integrity
issues on some hardware configurations.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-force-pll-reset">
<span class="sig-name descname"><span class="pre">--force-pll-reset</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-force-pll-reset" title="Permalink to this definition">#</a></dt>
<dd><p>Will force a device to reset when the PLL register is written during the
boot process.  By default the device will not reset when the PLL register
is written allowing for faster boot times.</p>
<p>This option is not recommended.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-jtag-speed">
<span class="sig-name descname"><span class="pre">--jtag-speed</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;n&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-jtag-speed" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the divider for the JTAG clock to <code class="docutils literal notranslate"><span class="pre">n</span></code>. The corresponding JTAG
clock speed is <span class="math notranslate nohighlight">\(25/(n+2)\)</span> MHz. The default value of the divider
for the JTAG clock is 0, representing 12.5 MHz.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-spec">
<span class="sig-name descname"><span class="pre">--spi-spec</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-spi-spec" title="Permalink to this definition">#</a></dt>
<dd><p>Enables support for the flash device specified in <code class="docutils literal notranslate"><span class="pre">file</span></code>
(see <a class="reference internal" href="../../../tutorials/add-flash-support/flash.html#add-flash-support"><span class="std std-ref">Add support for a new flash device</span></a>).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-div">
<span class="sig-name descname"><span class="pre">--spi-div</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;n&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-spi-div" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the divider for the SPI clock to <code class="docutils literal notranslate"><span class="pre">n</span></code>, producing an SPI clock
speed of <span class="math notranslate nohighlight">\(100/(2*n)\)</span> MHz. By default, if no target is specified, the
divider value is set to 3 (16.7MHz).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-quad-spi-clock">
<span class="sig-name descname"><span class="pre">--quad-spi-clock</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;arg&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-quad-spi-clock" title="Permalink to this definition">#</a></dt>
<dd><p>Set the Quad SPI clock for the second stage loader.
<code class="docutils literal notranslate"><span class="pre">arg</span></code> may be one of:
5MHz, 6.25MHz, 8.33MHz, 12.5MHz, 13.88MHz, 15.62MHz,
17.85MHz, 20.83MHz, 25MHz, 31.25MHz, 41.67MHz, 50MHz.
By default, the clock is set to 15.62MHz.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-image-search-page">
<span class="sig-name descname"><span class="pre">--image-search-page</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-image-search-page" title="Permalink to this definition">#</a></dt>
<dd><p>Will instruct the second stage bootloader to search flash memory for
potential upgrade images at every page boundry within the boot partition.
This was the default search mechanism in tools 14.0 and all previous tools
versions.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-image-search-sector">
<span class="sig-name descname"><span class="pre">--image-search-sector</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-image-search-sector" title="Permalink to this definition">#</a></dt>
<dd><p>Will instruct the second stage bootloader to search flash memory for
potential upgrade images at every sector boundry within the boot partition.
This is the default search mechanism as of tools 14.2.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-image-search-address">
<span class="sig-name descname"><span class="pre">--image-search-address</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;address&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-image-search-address" title="Permalink to this definition">#</a></dt>
<dd><p>Will instruct the second stage bootloader to search flash memory for
potential upgrade images at a specified address within the boot partition.
This option can be provided up to a maximum of three times, allowing for 3
separate upgrade images to be present within flash memory.</p>
</dd></dl>

</section>
<section id="security-options">
<span id="xflash-manual-security-options"></span><h3>Security Options<a class="headerlink" href="#security-options" title="Permalink to this heading">#</a></h3>
<p>The following options are used in conjunction with the
<a class="reference internal" href="../../../tutorials/safeguard-ip/safeguard.html#safeguard-ip-aes-module"><span class="std std-ref">AES Module</span></a>.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-key">
<span id="cmdoption-xflash-k"></span><span class="sig-name descname"><span class="pre">--key</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;keyfile&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-k</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;keyfile&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-key" title="Permalink to this definition">#</a></dt>
<dd><p>Encrypts the images in the boot partition using the keys in
<code class="docutils literal notranslate"><span class="pre">keyfile</span></code>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-disable-otp">
<span class="sig-name descname"><span class="pre">--disable-otp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-disable-otp" title="Permalink to this definition">#</a></dt>
<dd><p>Causes the flash loader to disable access to OTP memory after the
program is booted. This is default if the option <code class="docutils literal notranslate"><span class="pre">--key</span></code> is used.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-enable-otp">
<span class="sig-name descname"><span class="pre">--enable-otp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-enable-otp" title="Permalink to this definition">#</a></dt>
<dd><p>Causes the flash loader to enable access to OTP memory after the
program is booted. This is default unless the option <code class="docutils literal notranslate"><span class="pre">--key</span></code> is
used.</p>
</dd></dl>

</section>
<section id="programming-options">
<span id="xflash-manual-programming-options"></span><h3>Programming Options<a class="headerlink" href="#programming-options" title="Permalink to this heading">#</a></h3>
<p>By default, XFLASH programs the generated binary file to the target flash
device.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-outfile">
<span id="cmdoption-xflash-o"></span><span class="sig-name descname"><span class="pre">--outfile</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">-o</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-outfile" title="Permalink to this definition">#</a></dt>
<dd><p>Places output in <code class="docutils literal notranslate"><span class="pre">file</span></code>, disabling programming.</p>
<p>If the target platform is booted from more than one flash device,
multiple output files are created, one for each device. The name of
each output file is <code class="docutils literal notranslate"><span class="pre">file_&lt;node&gt;</span></code>, where &lt;node&gt; is the value of the
<a class="reference internal" href="../../formats/xn-spec/xn-spec.html#xn-spec-node"><span class="std std-ref">Id attribute</span></a> of the corresponding node.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-make-exec">
<span class="sig-name descname"><span class="pre">--make-exec</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;xe-file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-make-exec" title="Permalink to this definition">#</a></dt>
<dd><p>Places an executable in <code class="docutils literal notranslate"><span class="pre">xe-file</span></code> that when run on an xCORE device,
performs the specified flash operation.</p>
<p>The XE file can be run later using XRUN.</p>
</dd></dl>

<p>The following options perform generic read, write and erase operations
on the target flash device. A target XN file must be specified, which
provides ports used to communicate with the SPI device on the hardware
platform.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-erase-all">
<span class="sig-name descname"><span class="pre">--erase-all</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-erase-all" title="Permalink to this definition">#</a></dt>
<dd><p>Erases all memory on the flash device.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-read-all">
<span class="sig-name descname"><span class="pre">--read-all</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-read-all" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the contents of all memory on the flash device and writes it to
a file on the host. Must be used with <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-write-all">
<span class="sig-name descname"><span class="pre">--write-all</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;file&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-write-all" title="Permalink to this definition">#</a></dt>
<dd><p>Writes the bytes in <code class="docutils literal notranslate"><span class="pre">file</span></code> to the flash device.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-read-id">
<span class="sig-name descname"><span class="pre">--spi-read-id</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;cmd&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-spi-read-id" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the SPI manufacturer’s ID from the attached device. The <code class="docutils literal notranslate"><span class="pre">cmd</span></code>
can be obtained from the SPI manufacturer’s datasheet. If there is more
than one device in a network then all IDs will be returned.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-read-status">
<span class="sig-name descname"><span class="pre">--spi-read-status</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;cmd&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-spi-read-status" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the flash status register from the attached device. The <code class="docutils literal notranslate"><span class="pre">cmd</span></code>
can be obtained from the SPI manufacturer’s datasheet. If there is more
than one device in a network then all status registers will be returned.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-command">
<span id="cmdoption-xflash-spi-cmd"></span><span class="sig-name descname"><span class="pre">--spi-command</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;cmd&gt;</span> <span class="pre">[num-bytes-to-read]</span> <span class="pre">[bytes-to-write...]</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--spi-cmd</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;...&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-spi-command" title="Permalink to this definition">#</a></dt>
<dd><p>Issues an arbitrary SPI command to the flash device at the lowest level.
The command is sent to the device, followed by the <code class="docutils literal notranslate"><span class="pre">bytes-to-write</span></code>.
<code class="docutils literal notranslate"><span class="pre">num-bytes-to-read</span></code> are then read from the device and printed to the
host terminal.</p>
<p>If specifying <code class="docutils literal notranslate"><span class="pre">bytes-to-write</span></code>, one must specify <code class="docutils literal notranslate"><span class="pre">num-bytes-to-read</span></code>,
which can be zero. This is to maintain the order of the parameters.
This option can be provided repeatedly to issue multiple commands in a
sequence.</p>
<p>Check the SPI manufacturer’s datasheet for the commands supported by the
device and see <a class="reference internal" href="#xflash-manual-spi-command-option"><span class="std std-ref">SPI Command Option</span></a> for advanced usage
and examples.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-spi-interactive">
<span class="sig-name descname"><span class="pre">--spi-interactive</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-spi-interactive" title="Permalink to this definition">#</a></dt>
<dd><p>Interactive variant of the above option - the target requests commands
to issue to the flash device via host I/O in the same text format as in
<code class="docutils literal notranslate"><span class="pre">--spi-command</span></code>. See <a class="reference internal" href="#xflash-manual-spi-command-option"><span class="std std-ref">SPI Command Option</span></a> for advanced
usage and examples.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-no-reporting">
<span class="sig-name descname"><span class="pre">--no-reporting</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-no-reporting" title="Permalink to this definition">#</a></dt>
<dd><p>Prevents the flash programmer from printing progress updates to the host
terminal. This may result in a slight increase in programming performance,
particularly over JTAG.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-no-verify-on-write">
<span class="sig-name descname"><span class="pre">--no-verify-on-write</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-no-verify-on-write" title="Permalink to this definition">#</a></dt>
<dd><p>Prevents the flash programmer verifying pages after writing. By default,
the flash programmer will read back each page and throw an error upon
encountering a differing byte value. This assists diagnosing a faulty
flash device or issues with the physical connection.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-no-reset-on-write">
<span class="sig-name descname"><span class="pre">--no-reset-on-write</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-xflash-no-reset-on-write" title="Permalink to this definition">#</a></dt>
<dd><p>Prevents XFLASH from resetting the xCORE after programming the device.</p>
</dd></dl>

</section>
<section id="advanced-options">
<span id="xflash-manual-advanced-options"></span><h3>Advanced Options<a class="headerlink" href="#advanced-options" title="Permalink to this heading">#</a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-load-offset">
<span class="sig-name descname"><span class="pre">--load-offset</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;offset&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-load-offset" title="Permalink to this definition">#</a></dt>
<dd><p>Causes the flash programmer to treat the provided value as the start address
of the flash array to access for any read/write/erase operation. By default
this is zero.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-load-size">
<span class="sig-name descname"><span class="pre">--load-size</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;size&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-load-size" title="Permalink to this definition">#</a></dt>
<dd><p>Causes the flash programmer to treat the provided value as the data range
of the flash array to access for any read/write/erase operation. This means an
end address of <code class="docutils literal notranslate"><span class="pre">&lt;offset&gt;</span> <span class="pre">+</span> <span class="pre">&lt;size&gt;</span></code> used in combination with <code class="docutils literal notranslate"><span class="pre">--load-offset</span></code>.
By default this is the size of the flash device for read or erase operations,
or the size of the generated or specified image for write operations.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-xflash-load-format">
<span class="sig-name descname"><span class="pre">--load-format</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;format&gt;</span></span><a class="headerlink" href="#cmdoption-xflash-load-format" title="Permalink to this definition">#</a></dt>
<dd><p>Causes the flash programmer to use the specified image format for write
operations, where <code class="docutils literal notranslate"><span class="pre">&lt;format&gt;</span></code> is either <code class="docutils literal notranslate"><span class="pre">BIN</span></code> or <code class="docutils literal notranslate"><span class="pre">PPB</span></code>. <code class="docutils literal notranslate"><span class="pre">BIN</span></code> means
a raw, flat binary while <code class="docutils literal notranslate"><span class="pre">PPB</span></code> is an S-Record supported sparse image file.
By default the flash programmer uses whichever format will transmit the least
data over the debug interface to minimise the write duration, but both formats
are expected to result in identical data programmed to the flash device.</p>
</dd></dl>

</section>
<section id="spi-command-option">
<span id="xflash-manual-spi-command-option"></span><h3>SPI Command Option<a class="headerlink" href="#spi-command-option" title="Permalink to this heading">#</a></h3>
<p>The <a class="reference internal" href="#cmdoption-xflash-spi-command"><code class="xref std std-option docutils literal notranslate"><span class="pre">--spi-command</span></code></a> option allows issuing raw command sequences to
the flash device. Below are some examples of its usage and advanced features.</p>
<p>The examples in this section can be considered in relation to the
<a class="reference external" href="https://www.renesas.cn/cn/zh/document/dst/at25ff321a-datasheet">Adesto AT25FF321A</a>
device though the commands are applicable to and supported on the vast majority
of Quad SPI devices.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>xflash<span class="w"> </span>--target-file<span class="w"> </span>target.xn<span class="w"> </span>--spi-cmd<span class="w"> </span>0x06<span class="w"> </span>--spi-cmd<span class="w"> </span>0x05<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>This issues the Write Enable (WREN) command, followed by Read Status Register
(RDSR).</p>
<p>The Write Enable Latch (WEL) bit will be set in the RDSR response, due to the
use of WREN.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>xflash<span class="w"> </span>--target-file<span class="w"> </span>target.xn<span class="w"> </span>--spi-cmd<span class="w"> </span>0x44EB<span class="w"> </span><span class="m">258</span><span class="w"> </span>0x00<span class="w"> </span>0x01<span class="w"> </span>0x00<span class="w"> </span>0x00
</pre></div>
</div>
<p>For Quad SPI devices, data transfer in quad mode is supported.</p>
<p>This is enabled by using command ID bits 12..15 to specify the input data
transfer mode (the address), and bits 8..11 for the output data transfer mode
(the data).</p>
<p>This example reads the second page from the flash using the Fast Read Quad
I/O command (0xEB). 258 bytes are read instead of 256 due to dummy cycles
between the address and data transactions.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>xflash<span class="w"> </span>--target-file<span class="w"> </span>target.xn<span class="w"> </span>--spi-cmd<span class="w"> </span>0x06<span class="w"> </span>--spi-cmd<span class="w"> </span>0xC7<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--spi-cmd<span class="w"> </span>0x80000005<span class="w"> </span><span class="m">1</span><span class="w"> </span>--spi-cmd<span class="w"> </span>0x0B<span class="w"> </span><span class="m">257</span><span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00
</pre></div>
</div>
<p>When scripting a sequence of commands, it can be helpful to wait for a
previous operation to complete.</p>
<p>To simplify scripting of sequences, the <a class="reference internal" href="#cmdoption-xflash-spi-command"><code class="xref std std-option docutils literal notranslate"><span class="pre">--spi-command</span></code></a> option
implements “special commands”.</p>
<p>A special command requires that bit 31 is set. Bits 24..30 then encode
the special command type:</p>
<blockquote>
<div><ol class="arabic" start="0">
<li><p>Poll until bit clear</p>
<p>Repeatedly executes the command in bits 0..7, polling the response
until the bit in position indicated in bits 8..15 is clear.</p>
</li>
<li><p>Poll until bit set</p>
<p>Repeatedly executes the command in bits 0..7, polling the response
until the bit in position indicated in bits 8..15 is set.</p>
</li>
<li><p>Set QE bit (Quad SPI-only)</p>
<p>If command bit 0 is set, this command sets the Quad Enable bit.</p>
<p>If command bit 0 is clear, this command clears the Quad Enable
bit.</p>
<p>This will make use of the SFDP Quad Enable Requirements (QER)
field, unless overridden by the user in the XN file or SPI spec.
Some flash devices do not have a QE bit, in which case this
command will have no effect.</p>
<p>Note that a subsequent attempt to use XFLASH to write to the
flash will set the QE bit.</p>
</li>
<li><p>Set factory image protection</p>
<p>If command bit 0 is set, this command enables factory image
protection.</p>
<p>If command bit 0 is clear, this command disables factory image
protection.</p>
<p>This requires a device that supports individual block locking,
and a SPI spec file containing the protection commands to use.
Some flash devices also require a status register bit to be set
to enable the block locking - this can be configured using a
standard <a class="reference internal" href="#cmdoption-xflash-spi-command"><code class="xref std std-option docutils literal notranslate"><span class="pre">--spi-command</span></code></a> sequence. Refer to the SPI
manufacturer’s datasheet for more information.</p>
<p>Note that a subsequent attempt to use XFLASH to erase or write
the flash will disable protection.</p>
</li>
</ol>
</div></blockquote>
<p>For special commands, bits 0..23 are arbitrary and their meaning depends
on the special command type.</p>
<p>In the above example, type 0 is used with bit position 0. This waits for
the busy bit to clear following the Chip Erase (0xC7) operation, guaranteeing
that the following Fast Read (0x0B) returns an erased page.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>xflash<span class="w"> </span>--target-file<span class="w"> </span>target.xn<span class="w"> </span>--spi-cmd<span class="w"> </span>0x82000000<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--spi-cmd<span class="w"> </span>0x44EB<span class="w"> </span><span class="m">258</span><span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>--spi-cmd<span class="w"> </span>0x82000001<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--spi-cmd<span class="w"> </span>0x44EB<span class="w"> </span><span class="m">258</span><span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00
</pre></div>
</div>
<p>This example demonstrates the effect of the QE bit - a read in quad mode is
attempted first with it cleared, and then with it set. The first read will
fail to return the expected data from the flash, with the second providing
the correct data. If the Quad SPI device has no QE bit, both reads will
return the true flash data.</p>
<p>Note that XMOS Quad SPI boot requires the QE bit to be set.</p>
<p>Further worked example(s) concerning specific flash device quirks can be
found under <a class="reference internal" href="../../libraries/libquadflash-included-devices/libquadflash-devices.html#libquadflash-included-devices-table"><span class="std std-ref">libquadflash devices</span></a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The <a class="reference internal" href="#cmdoption-xflash-spi-command"><code class="xref std std-option docutils literal notranslate"><span class="pre">--spi-command</span></code></a> option is powerful and it’s possible to modify
non-volatile flash state that may cause the device to be inoperable or
incompatible with XMOS boot.</p>
<p>Be careful when using this option and refer to the SPI manufacturer’s
datasheet.</p>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../xburn-manual/xburn-manual.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">XBURN</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../xgdbserver-manual/xgdbserver-manual.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">XGDBSERVER</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, XMOS Ltd
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Jul 24, 2024</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">XFLASH</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#options">Options</a><ul>
<li><a class="reference internal" href="#overall-options">Overall Options</a></li>
<li><a class="reference internal" href="#target-options">Target Options</a></li>
<li><a class="reference internal" href="#security-options">Security Options</a></li>
<li><a class="reference internal" href="#programming-options">Programming Options</a></li>
<li><a class="reference internal" href="#advanced-options">Advanced Options</a></li>
<li><a class="reference internal" href="#spi-command-option">SPI Command Option</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/scripts/furo.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/tabs.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>